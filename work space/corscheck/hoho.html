<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
      
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>



ㄴㄴ
1.해야할것 조건검색 <br>

2. data picker와 데이터베이스 연동해서 동적쿼리짤것 <br>

3.통계커리 프로시저를 공부해서 연결시킬것  <br>

예상: 1~3끝나고 스케쥴러나 배치로 일정시간마다 프로그램실행코드를 만들것. <br>
부트스트랩으로 바꿀것.  <br>

고려할것 엑셀다운로드 기능 구현 공통단으로 쓸려면 어떻게해야할지생각하면서 구현하기  <br>

유연성없는 프로그램으로 만들면 나만 쓸수있으므로 개발속도에 도움이 되지 않음  <br>

캘리넏 사용할떄 쿼리문 to_date를 어떻게 설정할지 생각해볼것.  <br>

select 문을 case when문으로 해결하고 insert할떄 특정한 카테고리일떄  trigger를 실행시켜야하는데 <br>

이것을 코딩단에서해결말고 데이터베이스단에서 해결할 방법을 생각해볼것. 테이블이 2개로 나뉘어져있어도 카테고리에따라 다르게 설정해야하니 <br>

바로 trigger사용하기에도 에러사항이 있음 <br>

<br>
<input type="button" value="추가" onclick='gridaddgrid()'/>
<input type="button" value="삭제" onclick='griddelete()'/>
<input type="button" value="카테고리형식으로  몇개씩보기지원" onclick='aa()'/>
<input type="button" value="수정" onclick='gridmodify()'/>
<input type="button" value="dasdsad" onclick='check()'/>


check<br>
시설물현황
<a href='./aa.do'>가자</a>


    <div id="grid"></div>
    
    <br>
    <br>
    입력폼 모달로 만들지 생각해볼것
    <div id="grid2"></div>
    <input type="button" value="그리드2체크확인" onclick='grdi2checked()'/>
    
    
<script type="text/javascript" src="https://uicdn.toast.com/tui.code-snippet/latest/tui-code-snippet.js"></script>
<script src="https://uicdn.toast.com/tui.pagination/latest/tui-pagination.js"></script>
<script src="https://uicdn.toast.com/tui-grid/latest/tui-grid.js"></script>
<link rel="stylesheet" href="https://uicdn.toast.com/tui-grid/latest/tui-grid.css" />
<link rel="stylesheet" type="text/css" href="https://uicdn.toast.com/tui.pagination/latest/tui-pagination.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<style>
.tui-grid-cell-editable.red{
    background-color: red
}

</style>
<p class="tui-grid-cell-editable">dsadsa</p>
<script>
     $(window).on('load', function () {

        $.ajax({
		url:"http://localhost:8080/test/readData",
		type:"POST",
		contentType: 'application/json',
		success:function(date){
        
        console.log(date.data.contents)


            const grid2 = new tui.Grid({
	el: document.getElementById('grid2'),
	data:date.data.contents,
	scrollX: false,
	scrollY: false,
	minBodyHeight: 30,
	rowHeaders: ['checkbox'],
	editingEvent:"click",
	pageOptions: {
  useClient: true,
  perPage: 5
    },
	columns: [
		
		{
			header: '시설물이름',
			name: 'HONUMBER',
		 	editor:{
				type:'text'
			},
			validation:{
				required:true
			}

		}
		
	],
	 columnOptions: {
	      resizable: true
	    }
});

		}
	})
     //   grid.resetData(dataSource)

      }
     )



    function check() {

        $.ajax({
		url:"http://localhost:8080/test/readData",
		type:"POST",
		contentType: 'application/json',
		success:function(date){
        
        console.log(date.data.contents)


            const grid2 = new tui.Grid({
	el: document.getElementById('grid2'),
	data:date.data.contents,
	scrollX: false,
	scrollY: false,
	minBodyHeight: 30,
	rowHeaders: ['checkbox'],
	editingEvent:"click",
	pageOptions: {
  useClient: true,
  perPage: 5
    },
	columns: [
		
		{
			header: '시설물이름',
			name: 'HONUMBER',
		 	editor:{
				type:'text'
			},
			validation:{
				required:true
			}

		}
		
	],
	 columnOptions: {
	      resizable: true
	    }
});

		}
	})
     //   grid.resetData(dataSource)

      }
var a=10;
function gridmodify(){
	/* a=3;
	grid.setPerPage(a); */
	console.log(grid.getModifiedRows().updatedRows)
	$.ajax({
		url:"/mvc/facility/modifyData",
		data: JSON.stringify(grid.getModifiedRows().updatedRows),
		type:"PUT",
		contentType: 'application/json',
		success:function(date){
			alter("수정완료")
		}
	})
}
grid.on('click',(ev)=>{
	console.log(grid.getModifiedRows())
	
})



hahahoho.filter(function(element){
    console.log(element);
    return element.name!='1';
})

 </script>
<input type="button" onclick="find()" value="파인드">
</body>

</html>